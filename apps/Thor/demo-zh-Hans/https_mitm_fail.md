## HTTPS MiTM 解析失败的示例

### 0. 作用原理

Thor 的 HTTPS 解析跟其它抓包 App 不同，Thor 是自动尝试解析所有域名、IP 的 HTTPS 请求，而其它抓包类 App 则只会解析被配置的域名，对于没有配置的域名则不会尝试解析，不尝试解析就不会导致请求被中断。

HTTPS MiTM 需要尝试连接请求，如果解析失败，则该请求就会中断并失败，导致出现下面的异常现象。


**注：HTTPS 解析失败和忽略解析的请求会以 CONNECT 方法的形式出现在抓包记录里。Thor 对于尝试解析后失败的域名做了记录，如果首次尝试解析因为验证问题失败，则下次再遇到相同域名就忽略解析，保证流量的正常中转。**


### 1. 有的 App 内的广告会躲着 Thor

开启 Thor 以后去某些 App 内抓广告，发现广告消失了，关闭 Thor，再打开 App 发现广告又回来了。

这种情况极有可能：该广告是 HTTPS，并且做了证书验证，导致 Thor 无法解析，从而中断请求，于是广告数据就下载不下来，广告自然就不会展示出来。


### 2. 看到好看的视频，临时打开 Thor 想抓包，结果视频播放中断了

同理，因为视频是 HTTPS 且无法正常解析，于是请求中断，视频就断了。